Right hand side variables can be defined which do not actualy exist.
It should generate an error message.
Variables defined in a stage should be expanded, the original ignored. 

Also, there are 3 basic design patterns that I'm aware of for building pipelines, there may be others. Using Spinal naming here. 

Registers: data only, your case
Flow: valid+data
Stream: valid+ready+data


I think I need pipeline and end pipelinekeywords
pipeline(Registers)
pipeline(Flow)
pipeline(Stream) 

Suggest you add verilator with the  lint option to the output of your tool.